<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="Earn crypto, PayPal funds, and gift cards by completing offers and surveys" />
    <meta name="theme-color" content="#0a0a12" />
    <title>Bux IQ - Premium Rewards Platform</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/wppiqAy.png" />
    <link rel="apple-touch-icon" href="https://i.imgur.com/wppiqAy.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Bux iQ" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Segoe UI", Tahoma, Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #5d7ca6 0%, #3a5a8c 100%);
            color: #000;
            font-size: 14px;
            line-height: 1.4;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        .wm-header {
            background: linear-gradient(to bottom, #2c5aa0 0%, #1e3a6b 100%);
            color: white;
            height: 50px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            border-bottom: 1px solid #0f1f3a;
            font-weight: bold;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .wm-header .start { font-size: 16px; }
        .wm-header .title { 
            font-size: 18px; 
            font-weight: bold; 
            text-align: center; 
            flex-grow: 1; 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .wm-header .title img {
            height: 24px;
            margin-right: 8px;
        }
        .wm-header .time { font-size: 14px; }
        
        .wm-content {
            margin-top: 50px;
            margin-bottom: 60px;
            padding: 12px;
            min-height: calc(100vh - 110px);
        }
        
        .wm-tabs {
            display: flex;
            background: #4a6a9c;
            border-bottom: 1px solid #2c4163;
            overflow-x: auto;
            border-radius: 8px 8px 0 0;
        }
        
        .wm-tab {
            padding: 10px 16px;
            background: #6b8cc0;
            border: 1px solid #4a6a9c;
            border-bottom: none;
            border-radius: 4px 4px 0 0;
            margin-right: 2px;
            color: white;
            font-weight: bold;
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .wm-tab.active {
            background: #8faad6;
            color: #000;
        }
        
        .wm-section {
            background: #d4dff2;
            border: 1px solid #8faad6;
            border-radius: 0 0 8px 8px;
            padding: 15px;
            margin-top: 0;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .wm-section h2 {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 12px;
            color: #1e3a6b;
            border-bottom: 1px solid #8faad6;
            padding-bottom: 8px;
        }
        
        .wm-button {
            background: linear-gradient(to bottom, #f0f0f0 0%, #d4d4d4 100%);
            border: 1px solid #808080;
            border-radius: 6px;
            padding: 8px 16px;
            font-size: 14px;
            color: #000;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin: 4px 0;
            display: inline-block;
            text-align: center;
            transition: all 0.2s ease;
        }
        
        .wm-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .wm-button:active {
            background: linear-gradient(to bottom, #d4d4d4 0%, #f0f0f0 100%);
            transform: translateY(0);
        }
        
        .wm-button.primary {
            background: linear-gradient(to bottom, #4a6a9c 0%, #2c4163 100%);
            color: white;
            border-color: #1e3a6b;
        }
        
        .hidden { display: none !important; }
        
        .wm-status-bar {
            background: #4a6a9c;
            color: white;
            padding: 8px 12px;
            font-size: 13px;
            display: flex;
            justify-content: space-between;
            border-radius: 6px;
            margin-top: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .wm-logs {
            background: white;
            border: 1px solid #8faad6;
            border-radius: 6px;
            height: 150px;
            overflow-y: auto;
            padding: 12px;
            font-family: "Courier New", monospace;
            font-size: 12px;
            margin: 12px 0;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .wm-user-info {
            background: white;
            border: 1px solid #8faad6;
            border-radius: 8px;
            padding: 15px;
            margin: 12px 0;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .wm-user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            margin-right: 12px;
            border: 2px solid #8faad6;
        }
        
        .wm-user-details { flex-grow: 1; }
        
        .wm-user-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .wm-stat { 
            text-align: center; 
            flex: 1; 
            padding: 5px;
            background: #e8eef7;
            border-radius: 6px;
            margin: 0 3px;
        }
        .wm-stat-value { font-weight: bold; font-size: 18px; color: #1e3a6b; }
        .wm-stat-label { font-size: 11px; color: #4a6a9c; }
        
        .wm-list {
            background: white;
            border: 1px solid #8faad6;
            border-radius: 8px;
            overflow: hidden;
            margin: 12px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .wm-list-item {
            padding: 12px 15px;
            border-bottom: 1px solid #d4dff2;
            display: flex;
            align-items: center;
            transition: background 0.2s ease;
        }
        
        .wm-list-item:hover {
            background: #f0f5ff;
        }
        
        .wm-list-item:last-child { border-bottom: none; }
        
        .wm-list-item .icon {
            width: 30px;
            height: 30px;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #4a6a9c;
            color: white;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .wm-footer {
            background: linear-gradient(to bottom, #2c5aa0 0%, #1e3a6b 100%);
            height: 60px;
            position: fixed;
            bottom: 0;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 10px;
            border-top: 1px solid #0f1f3a;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .wm-footer-button {
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            width: 70px;
            height: 50px;
            text-align: center;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        
        .wm-footer-button i { font-size: 18px; margin-bottom: 4px; }
        .wm-footer-button.active { 
            background: rgba(255, 255, 255, 0.2); 
            transform: translateY(-3px);
        }
        
        .wm-footer-button:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .wm-input {
            background: white;
            border: 1px solid #808080;
            border-radius: 6px;
            padding: 10px 12px;
            font-size: 14px;
            width: 100%;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
            margin: 6px 0;
            transition: border 0.2s ease;
        }
        
        .wm-input:focus {
            border-color: #4a6a9c;
            outline: none;
        }
        
        .wm-captcha {
            background: #e8eef7;
            border: 1px solid #8faad6;
            border-radius: 6px;
            padding: 12px;
            text-align: center;
            font-family: "Courier New", monospace;
            font-size: 20px;
            font-weight: bold;
            letter-spacing: 3px;
            margin: 10px 0;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .wm-offer-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 12px 0;
        }
        
        .wm-offer-item {
            background: white;
            border: 1px solid #8faad6;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s ease;
        }
        
        .wm-offer-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }
        
        .wm-offer-item img {
            max-width: 100%;
            height: 50px;
            object-fit: contain;
            margin-bottom: 10px;
        }
        
        .wm-leaderboard {
            background: white;
            border: 1px solid #8faad6;
            border-radius: 8px;
            overflow: hidden;
            margin: 12px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .wm-leaderboard table { width: 100%; border-collapse: collapse; }
        .wm-leaderboard th {
            background: #4a6a9c;
            color: white;
            padding: 10px 12px;
            text-align: left;
            font-weight: bold;
            border-right: 1px solid #2c4163;
        }
        
        .wm-leaderboard th:last-child { border-right: none; }
        .wm-leaderboard td { padding: 10px 12px; border-bottom: 1px solid #d4dff2; }
        .wm-leaderboard tr:last-child td { border-bottom: none; }
        .wm-leaderboard tr:hover { background: #f0f5ff; }
        
        .bonus-code-section {
            background: #d4dff2;
            border: 1px solid #8faad6;
            border-radius: 8px;
            padding: 15px;
            margin-top: 0;
        }
        
        .info-box {
            background: #fff9e6;
            border: 1px solid #e6c200;
            border-radius: 6px;
            padding: 12px;
            margin: 12px 0;
            display: flex;
            align-items: flex-start;
        }
        
        .info-box i { color: #e6c200; margin-right: 10px; margin-top: 2px; }
        
        .bonus-form {
            background: white;
            border: 1px solid #8faad6;
            border-radius: 8px;
            padding: 15px;
            margin: 12px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 6px; font-weight: bold; color: #1e3a6b; }
        .form-row { display: flex; gap: 10px; }
        .form-row .form-group { flex: 1; }
        
        .google-login-btn {
            background: #4285f4;
            color: white;
            border: 1px solid #4285f4;
            border-radius: 6px;
            padding: 10px 15px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            margin: 10px 0;
            transition: all 0.2s ease;
        }
        
        .google-login-btn:hover {
            background: #3367d6;
        }
        
        .divider {
            text-align: center;
            margin: 15px 0;
            color: #4a6a9c;
            position: relative;
        }
        
        .divider::before {
            content: "";
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #8faad6;
            z-index: 1;
        }
        
        .divider span {
            background: #d4dff2;
            padding: 0 12px;
            position: relative;
            z-index: 2;
        }
        
        .error-message {
            color: #d32f2f;
            text-align: center;
            margin: 10px 0;
            padding: 10px;
            background: #ffebee;
            border: 1px solid #f44336;
            border-radius: 6px;
        }
        
        .success-message {
            color: #388e3c;
            text-align: center;
            margin: 10px 0;
            padding: 10px;
            background: #e8f5e9;
            border: 1px solid #4caf50;
            border-radius: 6px;
        }
        
        .wm-faq-item {
            background: white;
            border: 1px solid #8faad6;
            border-radius: 8px;
            padding: 12px 15px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .wm-faq-item h4 {
            color: #1e3a6b;
            margin-bottom: 8px;
            font-size: 15px;
        }
        
        .wm-faq-item p {
            margin-bottom: 5px;
            color: #333;
        }
        
        .progress-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 8px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, #4a6a9c, #2c5aa0);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .shop-item {
            background: white;
            border: 1px solid #8faad6;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .shop-item img {
            width: 50px;
            height: 50px;
            object-fit: contain;
            margin-right: 15px;
        }
        
        .shop-item-details {
            flex-grow: 1;
        }
        
        .shop-item-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #1e3a6b;
        }
        
        .shop-item-price {
            color: #4a6a9c;
            font-size: 14px;
        }
        
        @media (max-width: 480px) {
            .wm-offer-grid {
                grid-template-columns: 1fr;
            }
            
            .wm-footer-button {
                width: 60px;
                font-size: 10px;
            }
            
            .wm-footer-button i {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="wm-header">
        <div class="start"><i class="fas fa-bars"></i></div>
        <div class="title">
            <img src="https://i.imgur.com/wppiqAy.png" alt="Bux IQ Logo">
            Bux IQ
        </div>
        <div class="time" id="headerTime">12:00 PM</div>
    </div>
    
    <div class="wm-content">
        <div class="wm-tabs">
            <div class="wm-tab active" data-section="earn">Home</div>
            <div class="wm-tab" data-section="shop">Shop</div>
            <div class="wm-tab" data-section="leaders">Leaders</div>
            <div class="wm-tab" data-section="profile">Earn</div>
            <div class="wm-tab" data-section="bonus">Bonus</div>
            <div class="wm-tab" data-section="help">Help</div>
        </div>
        
        <div class="wm-status-bar">
            <center><div id="conversionRate">$1.00 = 1 pts</div></center>
            <div id="serverTime">Server Time: 00:00:00</div>
        </div>
        
        <!-- Home Section -->
        <div id="section-earn" class="wm-section">
            <h2>Welcome to Bux IQ</h2>
            
            <div class="wm-logs" id="logs">
                <div class="wm-list-item">
                    <div class="icon"><i class="fas fa-info-circle"></i></div>
                    <div>Your activity log will appear here</div>
                </div>
            </div>
            
            <div class="wm-user-info" id="userInfo">
                <img src="https://ui-avatars.com/api/?background=2c5aa0&color=fff&name=Guest&bold=true" class="wm-user-avatar" id="userAvatar">
                <div class="wm-user-details">
                    <div id="userName">Guest User</div>
                    <div class="wm-user-stats">
                        <div class="wm-stat">
                            <div class="wm-stat-value" id="userBalance">$0.00</div>
                            <div class="wm-stat-label">Balance</div>
                        </div>
                        <div class="wm-stat">
                            <div class="wm-stat-value" id="userLevel">0</div>
                            <div class="wm-stat-label">Level</div>
                        </div>
                        <div class="wm-stat">
                            <div class="wm-stat-value" id="userPoints">0</div>
                            <div class="wm-stat-label">Points</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="levelProgress" style="width: 0%"></div>
            </div>
            <div style="text-align: center; font-size: 12px; color: #4a6a9c;">Level Progress: <span id="levelProgressText">0%</span></div>
            
            <div class="wm-button primary" style="width: 100%; margin-top: 15px;" id="loginButton">Login to Earn</div>
            
            <h2>How It Works</h2>
            <div class="wm-list">
                <div class="wm-list-item">
                    <div class="icon"><i class="fas fa-tasks"></i></div>
                    <div>Complete Surveys & Offers</div>
                </div>
                <div class="wm-list-item">
                    <div class="icon"><i class="fas fa-star"></i></div>
                    <div>Earn Points & Rewards</div>
                </div>
                <div class="wm-list-item">
                    <div class="icon"><i class="fas fa-gift"></i></div>
                    <div>Redeem for Cash & Prizes</div>
                </div>
            </div>
        </div>
        
        <!-- Shop Section -->
        <div id="section-shop" class="wm-section hidden">
            <h2>Shop Rewards</h2>
            <p style="margin-bottom: 15px; text-align: center;">Redeem your points for amazing rewards</p>
            
            <div class="shop-item">
                <img src="https://cdn-icons-png.flaticon.com/512/179/179249.png" alt="PayPal">
                <div class="shop-item-details">
                    <div class="shop-item-title">PayPal Cash</div>
                    <div class="shop-item-price">1000 points = $10.00</div>
                </div>
                <div class="wm-button primary">Redeem</div>
            </div>
            
            <div class="shop-item">
                <img src="https://cdn-icons-png.flaticon.com/512/825/825454.png" alt="Amazon">
                <div class="shop-item-details">
                    <div class="shop-item-title">Amazon Gift Card</div>
                    <div class="shop-item-price">500 points = $5.00</div>
                </div>
                <div class="wm-button primary">Redeem</div>
            </div>
            
            <div class="shop-item">
                <img src="https://cdn-icons-png.flaticon.com/512/825/825545.png" alt="Steam">
                <div class="shop-item-details">
                    <div class="shop-item-title">Steam Wallet Code</div>
                    <div class="shop-item-price">1000 points = $10.00</div>
                </div>
                <div class="wm-button primary">Redeem</div>
            </div>
            
            <div class="shop-item">
                <img src="https://cdn-icons-png.flaticon.com/512/5968/5968260.png" alt="Bitcoin">
                <div class="shop-item-details">
                    <div class="shop-item-title">Bitcoin</div>
                    <div class="shop-item-price">1000 points = $10.00</div>
                </div>
                <div class="wm-button primary">Redeem</div>
            </div>
        </div>
        
        <!-- Leaders Section -->
        <div id="section-leaders" class="wm-section hidden">
            <h2>Leaderboard</h2>
            <p style="margin-bottom: 15px; text-align: center;">Top earners this week</p>
            
            <div class="wm-leaderboard">
                <table>
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Username</th>
                            <th>Earnings</th>
                            <th>Level</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                        <tr><td colspan="4" style="text-align: center;">Loading leaderboard...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Profile/Earn Section -->
        <div id="section-profile" class="wm-section hidden">
            <div id="login-container">
                <h2>Login</h2>
                
                <div id="g_id_onload"
                    data-client_id="387422659555-007kjhq0c41f2lq39e075ib5mtpf3q9o.apps.googleusercontent.com"
                    data-context="signin"
                    data-ux_mode="popup"
                    data-callback="handleGoogleCredentialResponse"
                    data-auto_prompt="false">
                </div>

                <div class="g_id_signin google-login-btn" 
                     data-type="standard" 
                     data-theme="filled_blue" 
                     data-text="signin_with" 
                     data-shape="rectangular" 
                     data-logo_alignment="left">
                     <i class="fab fa-google" style="margin-right: 8px;"></i> Sign in with Google
                </div>
                
                <div class="divider"><span>OR</span></div>
                
                <div class="wm-login-form">
                    <label for="login-account">Account #</label>
                    <input type="text" id="login-account" class="wm-input" placeholder="Enter your account number">
                    
                    <label for="login-clientid">Client ID</label>
                    <input type="text" id="login-clientid" class="wm-input" placeholder="Enter your client ID">
                    
                    <label>CAPTCHA</label>
                    <div class="wm-captcha" id="captcha"></div>
                    <input type="text" id="captchaInput" class="wm-input" placeholder="Enter CAPTCHA">
                    
                    <div class="wm-button primary" style="width: 100%;" id="loginFormButton">Login</div>
                </div>
                <div id="error-msg" class="error-message hidden"></div>
            </div>
            
            <div id="dashboard" class="hidden">
                <h2>Earning Portal</h2>
                <p style="margin-bottom: 15px; text-align: center;">Complete offers and surveys to earn rewards</p>
                
                <div class="wm-offer-grid" id="offerwall-grid">
                    <div class="wm-offer-item">
                        <img src="https://www.cpx-research.com/main/en/assets/img/logo.svg" alt="CPX Research">
                        <div class="wm-button primary" data-offer="cpx">Open OfferWall</div>
                    </div>
                    <div class="wm-offer-item">
                        <img src="https://www.spark-wall.com/images/logo.png" alt="SparkWall">
                        <div class="wm-button primary" data-offer="spark">Open OfferWall</div>
                    </div>
                    <div class="wm-offer-item">
                        <img src="https://offerwallmedia.com/assets/cwdash/img/logo.png" alt="OfferWall Media">
                        <div class="wm-button primary" data-offer="owm">Open OfferWall</div>
                    </div>
                    <div class="wm-offer-item">
                        <img src="https://adgem.com/assets/img/adgem-logo.png" alt="AdGem">
                        <div class="wm-button primary" data-offer="adgem">Open OfferWall</div>
                    </div>
                </div>
                
                <div class="wm-button" style="width: 100%; margin-top: 15px;" id="logoutBtn">Logout</div>
            </div>
        </div>
        
        <!-- Bonus Section -->
        <div id="section-bonus" class="bonus-code-section hidden">
            <h2>Redeem Bonus Code</h2>
            
            <div class="info-box">
                <i class="fas fa-exclamation-triangle"></i>
                <div>FIRST COME FIRST SERVED! Each bonus code can only be used once.</div>
            </div>
            
            <form class="bonus-form" id="redeemForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" class="wm-input" required placeholder="Enter your username">
                </div>
                
                <div class="form-group">
                    <label for="bonusCode">Bonus Code</label>
                    <input type="text" id="bonusCode" class="wm-input" required placeholder="Enter bonus code">
                </div>
                
                <button type="button" class="wm-button primary" id="redeemBonusButton">Redeem Bonus Code</button>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="amountLocal">Amount (Local)</label>
                        <input type="text" id="amountLocal" class="wm-input" readonly placeholder="0">
                    </div>
                    
                    <div class="form-group">
                        <label for="amountUsd">Amount (USD)</label>
                        <input type="text" id="amountUsd" class="wm-input" readonly placeholder="$0.00">
                    </div>
                </div>
            </form>
            <div id="bonus-message" class="hidden"></div>
        </div>
        
        <!-- Help Section -->
        <div id="section-help" class="wm-section hidden">
            <h2>Help & Support</h2>
            
            <div class="wm-faq-item">
                <h4>How do I earn points?</h4>
                <p>1. Login to your account</p>
                <p>2. Click on the Earn tab</p>
                <p>3. Complete offers and surveys from our partner networks</p>
            </div>
            
            <div class="wm-faq-item">
                <h4>How can I redeem rewards?</h4>
                <p>Go to the Shop section and choose your preferred redemption method.</p>
            </div>
            
            <div class="wm-faq-item">
                <h4>How to redeem bonus codes?</h4>
                <p>Go to the Bonus section, enter your username and the bonus code, then click Redeem.</p>
            </div>
            
            <div class="wm-faq-item">
                <h4>When will I receive my rewards?</h4>
                <p>Digital rewards are typically delivered within 24 hours. Physical items may take 7-14 business days.</p>
            </div>
            
            <div class="wm-button primary" style="width: 100%;" id="contact-support-btn">Contact Support</div>
        </div>
    </div>
    
    <div class="wm-footer">
        <div class="wm-footer-button active" data-section="earn">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </div>
        <div class="wm-footer-button" data-section="shop">
            <i class="fas fa-shopping-bag"></i>
            <span>Shop</span>
        </div>
        <div class="wm-footer-button" data-section="leaders">
            <i class="fas fa-trophy"></i>
            <span>Leaders</span>
        </div>
        <div class="wm-footer-button" data-section="profile">
            <i class="fas fa-money-bill-wave"></i>
            <span>Earn</span>
        </div>
        <div class="wm-footer-button" data-section="bonus">
            <i class="fas fa-star"></i>
            <span>BONUS</span>
        </div>
        <div class="wm-footer-button" data-section="help">
            <i class="fas fa-question-circle"></i>
            <span>Help</span>
        </div>
    </div>

<script>
    // Configuration - REPLACE WITH YOUR ACTUAL DEPLOYED SCRIPT URL
    const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxBNbX9hhPPNSx9mIeRcyZP7nekOWxDHkzk4b_1QNgmwkiiO8PIvpr50di9ms8fNYCm/exec';

    // Global variables
    let captchaCode = '';
    let currentUser = null;
    let settings = {};

    // Initialize everything when page loads
    document.addEventListener('DOMContentLoaded', function() {
        initializeApp();
    });

    async function initializeApp() {
        generateCaptcha();
        initializeEventListeners();
        updateServerTime();
        setInterval(updateServerTime, 1000);
        updateHeaderTime();
        setInterval(updateHeaderTime, 60000);
        
        // Load settings and data
        await loadSettings();
        await loadLeaderboard();
        await loadActivityLogs();
        
        checkExistingSession();
    }

    function initializeEventListeners() {
        // Tab navigation
        document.querySelectorAll('.wm-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                showSection(tab.dataset.section);
                document.querySelectorAll('.wm-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
            });
        });

        // Footer navigation
        document.querySelectorAll('.wm-footer-button').forEach(button => {
            button.addEventListener('click', () => {
                showSection(button.dataset.section);
                document.querySelectorAll('.wm-footer-button').forEach(b => b.classList.remove('active'));
                button.classList.add('active');
            });
        });

        // Login buttons
        document.getElementById('loginButton').addEventListener('click', () => showSection('profile'));
        document.getElementById('loginFormButton').addEventListener('click', handleLogin);
        document.getElementById('logoutBtn').addEventListener('click', logout);
        document.getElementById('redeemBonusButton').addEventListener('click', redeemBonusCode);
        document.getElementById('contact-support-btn').addEventListener('click', () => {
            alert('Contact support at: support@buxiq.com');
        });

        // Offerwall buttons
        document.querySelectorAll('[data-offer]').forEach(button => {
            button.addEventListener('click', function() {
                if (!currentUser) {
                    alert('Please login first');
                    showSection('profile');
                    return;
                }
                const offerType = this.dataset.offer;
                openOfferWall(offerType);
            });
        });

        // Shop item buttons
        document.querySelectorAll('.shop-item .wm-button').forEach(button => {
            button.addEventListener('click', function() {
                if (!currentUser) {
                    alert('Please login first');
                    showSection('profile');
                    return;
                }
                const item = this.closest('.shop-item');
                const title = item.querySelector('.shop-item-title').textContent;
                alert(`You've selected: ${title}. This feature will be available soon!`);
            });
        });
    }

    function showSection(section) {
        document.querySelectorAll('[id^="section-"]').forEach(sec => {
            sec.classList.add('hidden');
        });
        document.getElementById('section-' + section).classList.remove('hidden');
        
        // Load section-specific data
        if (section === 'leaders') loadLeaderboard();
        if (section === 'earn') loadActivityLogs();
    }

    async function loadSettings() {
        try {
            console.log('Loading settings from:', GOOGLE_SCRIPT_URL);
            const response = await fetch(GOOGLE_SCRIPT_URL + '?action=getSettings&timestamp=' + Date.now());
            
            if (!response.ok) {
                throw new Error('HTTP error: ' + response.status);
            }
            
            const data = await response.json();
            
            if (data.error) {
                throw new Error(data.error);
            }
            
            settings = data;
            
            // Update UI with settings
            if (settings.site_name) {
                document.getElementById('siteTitle').textContent = settings.site_name;
                document.title = settings.site_name + ' - Premium Rewards Platform';
            }
            if (settings.conversion_rate) {
                document.getElementById('conversionRate').textContent = '$' + settings.conversion_rate + ' = 1 pts';
            }
            
            console.log('Settings loaded successfully');
        } catch (error) {
            console.error('Error loading settings:', error);
            // Fallback to default settings
            settings = {
                site_name: "Bux IQ",
                conversion_rate: "1.00"
            };
            showNotification('Using demo settings', 'warning');
        }
    }

    async function loadLeaderboard() {
        try {
            const response = await fetch(GOOGLE_SCRIPT_URL + '?action=getLeaderboard&timestamp=' + Date.now());
            
            if (!response.ok) {
                throw new Error('HTTP error: ' + response.status);
            }
            
            const leaderboard = await response.json();
            
            if (leaderboard.error) {
                throw new Error(leaderboard.error);
            }
            
            const tbody = document.getElementById('leaderboardBody');
            tbody.innerHTML = '';
            
            if (leaderboard.length === 0) {
                tbody.innerHTML = '<tr><td colspan="4" style="text-align: center;">No data available</td></tr>';
                return;
            }
            
            leaderboard.forEach((user, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${user.username}</td>
                    <td>$${user.balance ? user.balance.toFixed(2) : '0.00'}</td>
                    <td>${user.level || 1}</td>
                `;
                tbody.appendChild(row);
            });
            
        } catch (error) {
            console.error('Error loading leaderboard:', error);
            // Fallback to demo data
            const leaderboard = [
                { username: "EarnMaster", balance: 245.67, level: 15 },
                { username: "SurveyKing", balance: 198.43, level: 14 },
                { username: "DemoUser", balance: 25.50, level: 5 }
            ];
            
            const tbody = document.getElementById('leaderboardBody');
            tbody.innerHTML = '';
            
            leaderboard.forEach((user, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${user.username}</td>
                    <td>$${user.balance.toFixed(2)}</td>
                    <td>${user.level}</td>
                `;
                tbody.appendChild(row);
            });
            
            showNotification('Using demo leaderboard data', 'warning');
        }
    }

    async function loadActivityLogs() {
        try {
            const response = await fetch(GOOGLE_SCRIPT_URL + '?action=getActivityLogs&timestamp=' + Date.now());
            
            if (!response.ok) {
                throw new Error('HTTP error: ' + response.status);
            }
            
            const logs = await response.json();
            
            if (logs.error) {
                throw new Error(logs.error);
            }
            
            const logsContainer = document.getElementById('logs');
            logsContainer.innerHTML = '';
            
            if (logs.length === 0) {
                logsContainer.innerHTML = '<div class="wm-list-item"><div class="icon"><i class="fas fa-info-circle"></i></div><div>No activity yet</div></div>';
                return;
            }
            
            // Show latest logs
            logs.forEach(log => {
                const logItem = document.createElement('div');
                logItem.className = 'wm-list-item';
                logItem.innerHTML = `
                    <div class="icon"><i class="fas fa-user"></i></div>
                    <div>${log.Account} ${log.Activity} $${parseFloat(log.Amount || 0).toFixed(2)}</div>
                `;
                logsContainer.appendChild(logItem);
            });
            
        } catch (error) {
            console.error('Error loading activity logs:', error);
            // Fallback to demo logs
            const logs = [
                { Account: "Guest", Activity: "visited the platform", Amount: "0" },
                { Account: "DemoUser", Activity: "completed a survey", Amount: "2.50" }
            ];
            
            const logsContainer = document.getElementById('logs');
            logsContainer.innerHTML = '';
            
            logs.forEach(log => {
                const logItem = document.createElement('div');
                logItem.className = 'wm-list-item';
                logItem.innerHTML = `
                    <div class="icon"><i class="fas fa-user"></i></div>
                    <div>${log.Account} ${log.Activity} $${parseFloat(log.Amount || 0).toFixed(2)}</div>
                `;
                logsContainer.appendChild(logItem);
            });
        }
    }

    function generateCaptcha() {
        captchaCode = Math.random().toString(36).substring(2, 8).toUpperCase();
        document.getElementById('captcha').textContent = captchaCode;
    }

    function updateServerTime() {
        const now = new Date();
        const pstTime = new Date(now.getTime() - (8 * 60 * 60 * 1000));
        const timeString = pstTime.toISOString().substr(11, 8);
        document.getElementById('serverTime').textContent = 'Server Time: ' + timeString + ' PST';
    }

    function updateHeaderTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        document.getElementById('headerTime').textContent = timeString;
    }

    function checkExistingSession() {
        const savedAccount = localStorage.getItem('buxiq_account');
        if (savedAccount) {
            document.getElementById('login-account').value = savedAccount;
        }
    }

    async function handleLogin() {
        const account = document.getElementById('login-account').value.trim();
        const clientid = document.getElementById('login-clientid').value.trim();
        const captchaInput = document.getElementById('captchaInput').value.trim();
        const errorMsg = document.getElementById('error-msg');
        
        if (!account || !clientid || !captchaInput) {
            showMessage(errorMsg, 'Please fill all fields', 'error');
            return;
        }
        
        if (captchaInput !== captchaCode) {
            showMessage(errorMsg, 'Invalid CAPTCHA', 'error');
            generateCaptcha();
            document.getElementById('captchaInput').value = '';
            return;
        }
        
        // Show loading state
        const button = document.getElementById('loginFormButton');
        const originalText = button.textContent;
        button.textContent = 'Logging in...';
        button.disabled = true;
        
        try {
            const response = await fetch(GOOGLE_SCRIPT_URL + '?action=login&account=' + encodeURIComponent(account) + '&clientid=' + encodeURIComponent(clientid) + '&timestamp=' + Date.now());
            
            if (!response.ok) {
                throw new Error('HTTP error: ' + response.status);
            }
            
            const result = await response.json();
            
            if (result.error) {
                throw new Error(result.error);
            }
            
            if (result.success && result.user) {
                // Login successful
                currentUser = result.user;
                localStorage.setItem('buxiq_account', account);
                
                // Update UI
                updateUserUI(currentUser);
                
                document.getElementById('login-container').classList.add('hidden');
                document.getElementById('dashboard').classList.remove('hidden');
                errorMsg.classList.add('hidden');
                
                addToLogs('Welcome back ' + currentUser.Username + '!');
                
            } else {
                throw new Error('Login failed');
            }
            
        } catch (error) {
            console.error('Login error:', error);
            showMessage(errorMsg, error.message || 'Login failed. Please try again.', 'error');
            generateCaptcha();
        } finally {
            // Restore button state
            button.textContent = originalText;
            button.disabled = false;
        }
    }

    function updateUserUI(userData) {
        document.getElementById('userAvatar').src = userData.Avatar;
        document.getElementById('userName').textContent = userData.Username;
        document.getElementById('userBalance').textContent = '$' + parseFloat(userData.Balance).toFixed(2);
        document.getElementById('userLevel').textContent = userData.Level;
        document.getElementById('userPoints').textContent = userData.Points;
        
        // Update progress bar
        const progress = (userData.Level / 10) * 100;
        document.getElementById('levelProgress').style.width = progress + '%';
        document.getElementById('levelProgressText').textContent = progress + '%';
        
        // Update username field in bonus section
        document.getElementById('username').value = userData.Username;
    }

    function handleGoogleCredentialResponse(response) {
        console.log('Google login response:', response);
        alert('Google authentication would be implemented here.');
    }

    function logout() {
        currentUser = null;
        localStorage.removeItem('buxiq_account');
        
        document.getElementById('dashboard').classList.add('hidden');
        document.getElementById('login-container').classList.remove('hidden');
        document.getElementById('login-account').value = '';
        document.getElementById('login-clientid').value = '';
        document.getElementById('captchaInput').value = '';
        
        // Reset user info
        document.getElementById('userAvatar').src = 'https://ui-avatars.com/api/?background=2c5aa0&color=fff&name=Guest&bold=true';
        document.getElementById('userName').textContent = 'Guest User';
        document.getElementById('userBalance').textContent = '$0.00';
        document.getElementById('userLevel').textContent = '0';
        document.getElementById('userPoints').textContent = '0';
        document.getElementById('levelProgress').style.width = '0%';
        document.getElementById('levelProgressText').textContent = '0%';
        
        showSection('earn');
        addToLogs('You have been logged out.');
    }

    async function redeemBonusCode() {
        const username = document.getElementById('username').value.trim();
        const bonusCode = document.getElementById('bonusCode').value.trim().toUpperCase();
        const messageDiv = document.getElementById('bonus-message');
        
        if (!username || !bonusCode) {
            showMessage(messageDiv, 'Please enter both username and bonus code', 'error');
            return;
        }
        
        // Show loading state
        const button = document.getElementById('redeemBonusButton');
        const originalText = button.textContent;
        button.textContent = 'Processing...';
        button.disabled = true;
        
        try {
            const response = await fetch(GOOGLE_SCRIPT_URL + '?action=redeemBonus&username=' + encodeURIComponent(username) + '&bonusCode=' + encodeURIComponent(bonusCode) + '&timestamp=' + Date.now());
            
            if (!response.ok) {
                throw new Error('HTTP error: ' + response.status);
            }
            
            const result = await response.json();
            
            if (result.error) {
                throw new Error(result.error);
            }
            
            if (result.success) {
                // Success
                document.getElementById('amountLocal').value = result.amountLocal;
                document.getElementById('amountUsd').value = '$' + result.amountUSD;
                
                showMessage(messageDiv, result.message, 'success');
                
                // Update balance if current user redeemed the code
                if (currentUser && (currentUser.Username === username || currentUser.Account === username)) {
                    const newBalance = (parseFloat(currentUser.Balance) + parseFloat(result.amountUSD)).toFixed(2);
                    document.getElementById('userBalance').textContent = '$' + newBalance;
                    currentUser.Balance = newBalance;
                    
                    // Also update points
                    const newPoints = parseInt(currentUser.Points) + parseInt(result.amountLocal) * 100;
                    document.getElementById('userPoints').textContent = newPoints;
                    currentUser.Points = newPoints;
                }
                
                // Clear form after successful redemption
                setTimeout(() => {
                    document.getElementById('bonusCode').value = '';
                    messageDiv.classList.add('hidden');
                }, 5000);
                
            } else {
                throw new Error('Redemption failed');
            }
            
        } catch (error) {
            console.error('Error redeeming bonus code:', error);
            showMessage(messageDiv, error.message || 'Network error. Please try again.', 'error');
        } finally {
            // Restore button state
            button.textContent = originalText;
            button.disabled = false;
        }
    }

    function openOfferWall(type) {
        const templates = {
            cpx: 'https://offers.cpx-research.com/',
            spark: 'https://spark-wall.com/',
            owm: 'https://offerwallmedia.com/',
            adgem: 'https://adgem.com/'
        };
        
        const username = currentUser.Username || currentUser.Account;
        const url = templates[type];
        
        window.open(url, '_blank');
        addToLogs('Opened ' + type + ' offerwall');
    }

    function showMessage(element, message, type) {
        element.textContent = message;
        element.className = type + '-message';
        element.classList.remove('hidden');
    }

    function showNotification(message, type = 'info') {
        // Create a temporary notification
        const notification = document.createElement('div');
        notification.textContent = message;
        notification.style.cssText = `
            position: fixed;
            top: 70px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 6px;
            color: white;
            z-index: 10000;
            font-weight: bold;
            max-width: 300px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        `;
        
        if (type === 'error') {
            notification.style.background = '#f44336';
        } else if (type === 'warning') {
            notification.style.background = '#ff9800';
        } else if (type === 'success') {
            notification.style.background = '#4caf50';
        } else {
            notification.style.background = '#2196f3';
        }
        
        document.body.appendChild(notification);
        
        // Remove after 5 seconds
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        }, 5000);
    }

    function addToLogs(message) {
        const logsContainer = document.getElementById('logs');
        const logItem = document.createElement('div');
        logItem.className = 'wm-list-item';
        logItem.innerHTML = `
            <div class="icon"><i class="fas fa-info-circle"></i></div>
            <div>${new Date().toLocaleTimeString()} - ${message}</div>
        `;
        logsContainer.insertBefore(logItem, logsContainer.firstChild);
        
        // Keep only last 5 logs
        while (logsContainer.children.length > 5) {
            logsContainer.removeChild(logsContainer.lastChild);
        }
    }

    // Test the connection
    async function testConnection() {
        try {
            const response = await fetch(GOOGLE_SCRIPT_URL + '?action=getSettings&timestamp=' + Date.now());
            if (response.ok) {
                const data = await response.json();
                console.log(' Connected to Google Apps Script successfully!', data);
                return true;
            } else {
                console.log(' Connection failed:', response.status);
                return false;
            }
        } catch (error) {
            console.log(' Connection failed:', error.message);
            return false;
        }
    }

    // Run connection test
    setTimeout(() => {
        testConnection();
    }, 2000);
</script>
</body>
</html>
